<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva Horizontal – Ciclos 1 al 4</title>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:#f5f6fa;margin:0;padding:20px;color:#2c3e50}
    h1{text-align:center;color:#1c1c1c;margin-top:0}
    .fila-ciclos{display:flex;gap:20px;overflow-x:auto;padding:20px 0}
    .ciclo{flex:0 0 360px;background:#fff;border-radius:10px;padding:20px;
           box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .ciclo h2{border-left:6px solid #000;padding-left:12px;color:#000;margin:0 0 16px}
    .curso{margin:10px 0;padding:14px;border-radius:8px;border:2px solid transparent;
           width:100%;text-align:center;font-size:15px;font-weight:bold;cursor:pointer;
           transition:.3s}
    .bloqueado{background:#333;color:#aaa;cursor:not-allowed}
    .activo{background:#fff;color:#000;border-color:#000}
    .activo:hover{background:#000;color:#fff}
    .completado{background:#27ae60;color:#fff;text-decoration:line-through}
  </style>
</head>
<body>
  <h1>Malla Interactiva Horizontal – Ciclos 1 al 4</h1>
  <div class="fila-ciclos" id="contenedor"></div>

  <script>
    /* ------------ Datos -------------- */
    const cursos = {
      "CICLO I":[
        {n:"INTRODUCCIÓN A LA VIDA UNIVERSITARIA"},
        {n:"INTRODUCCIÓN A LA MATEMÁTICA PARA INGENIERÍA",alias:"MATEMÁTICA 1"},
        {n:"PRINCIPIOS DE ALGORITMOS"},
        {n:"INDIVIDUO Y MEDIO AMBIENTE"},
        {n:"COMPRENSIÓN Y REDACCIÓN DE TEXTOS I"},
        {n:"INGLÉS I"}
      ],
      "CICLO II":[
        {n:"CÁLCULO APLICADO A LA FÍSICA 1",pre:["INTRODUCCIÓN A LA MATEMÁTICA PARA INGENIERÍA"]},
        {n:"MATEMÁTICA PARA INGENIEROS I",alias:"MATEMÁTICA 2",pre:["INTRODUCCIÓN A LA MATEMÁTICA PARA INGENIERÍA"]},
        {n:"MATEMÁTICA DISCRETA",pre:["INTRODUCCIÓN A LA MATEMÁTICA PARA INGENIERÍA"]},
        {n:"COMPRENSIÓN Y REDACCIÓN DE TEXTOS II",pre:["COMPRENSIÓN Y REDACCIÓN DE TEXTOS I"]},
        {n:"INGLÉS II",pre:["INGLÉS I"]},
        {n:"INTRODUCCIÓN A LAS TIC",pre:["INTRODUCCIÓN A LA VIDA UNIVERSITARIA"]}
      ],
      "CICLO III":[
        {n:"TALLER DE PROGRAMACIÓN",pre:["PRINCIPIOS DE ALGORITMOS","INTRODUCCIÓN A LAS TIC"]},
        {n:"CIUDADANÍA Y REFLEXIÓN ÉTICA",pre:["INDIVIDUO Y MEDIO AMBIENTE"]},
        {n:"CÁLCULO 1",pre:["MATEMÁTICA PARA INGENIEROS I"]},
        {n:"ESTADÍSTICA INFERENCIAL",pre:["MATEMÁTICA PARA INGENIEROS I"]},
        {n:"MECÁNICA CLÁSICA",pre:["MATEMÁTICA PARA INGENIEROS I"]},
        {n:"LABORATORIO DE MECÁNICA CLÁSICA",pre:["MECÁNICA CLÁSICA"]},
        {n:"INGLÉS III",pre:["INGLÉS II"]}
      ],
      "CICLO IV":[
        {n:"PROGRAMACIÓN ORIENTADA A OBJETOS",pre:["TALLER DE PROGRAMACIÓN"]},
        {n:"ANÁLISIS Y DISEÑO DE ALGORITMOS",pre:["TALLER DE PROGRAMACIÓN"]},
        {n:"CÁLCULO 2",pre:["CÁLCULO 1"]},
        {n:"INVESTIGACIÓN ACADÉMICA",pre:["COMPRENSIÓN Y REDACCIÓN DE TEXTOS II"]},
        {n:"BASE DE DATOS 1",pre:["TALLER DE PROGRAMACIÓN"]},
        {n:"FUNDAMENTOS DE ELECTROMAGNETISMO",pre:["MECÁNICA CLÁSICA"]},
        {n:"LABORATORIO DE FUNDAMENTOS DE ELECTROMAGNETISMO",pre:["FUNDAMENTOS DE ELECTROMAGNETISMO"]},
        {n:"INGLÉS IV",pre:["INGLÉS III"]}
      ]
    };

    /* ---------- Estado guardado ---------- */
    const estado = JSON.parse(localStorage.getItem('estadoCursos')||'{}');

    function save(){localStorage.setItem('estadoCursos',JSON.stringify(estado));}

    function requisitosCumplidos(req=[]){
      return req.every(r=>estado[r]);
    }

    /* ---------- Render ---------- */
    const cont = document.getElementById('contenedor');
    cont.innerHTML='';
    Object.entries(cursos).forEach(([ciclo,lista])=>{
      const div=document.createElement('div');div.className='ciclo';
      div.innerHTML=`<h2>${ciclo}</h2>`;
      lista.forEach(c=>{
        const label=c.alias||c.n;
        const btn=document.createElement('button');
        btn.className='curso';
        btn.textContent=label;
        const completo=estado[c.n];
        const activo=!completo&&requisitosCumplidos(c.pre);
        if(completo){
          btn.classList.add('completado');
          btn.textContent='✅ '+label;
        }else if(activo){
          btn.classList.add('activo');
        }else{
          btn.classList.add('bloqueado');
          btn.disabled=true;
        }
        btn.onclick=()=>{
          if(btn.classList.contains('bloqueado'))return;
          estado[c.n]=!estado[c.n];
          save();
          location.reload();
        };
        div.appendChild(btn);
      });
      cont.appendChild(div);
    });
  </script>
</body>
</html>
